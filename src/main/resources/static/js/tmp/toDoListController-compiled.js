'use strict';var progressValues,Url='/list/';$(document).ready(function(){$.ajax({type:'GET',url:window.location+Url+'taskProgress',success:function success(a){a?progressValues=a:a=null},error:function error(a){return console.log('ERROR: ',a),null}}),getToDoList(),$('#submit-task').click(function(){event.preventDefault(),addNewToDo()}),$('#task-form').on('keydown',function(a){if(13==a.keyCode||13==a.which)return addNewToDo(),!1}),$('#todoTable').on('change','.select-progress',function(){changeProgress.call(this,Url)}),$('#todoTable').on('click','.delete-task',function(){deleteTask.call(this,Url)})});function addNewToDo(){var a=$('#task').val(),b=$('#assignee').val();if(''==b||''==a||''==b&&''==a)return void $('#post-error').css('display','block');var c=jsonString(1,a,'NOT_STARTED',b);$.ajax({url:window.location+Url,type:'POST',dataType:'json',data:c,contentType:'application/json',mimeType:'application/json',success:function success(){var a=null;$.ajax({type:'GET',url:window.location+Url,async:!1,dataType:'json',success:function success(b){a=b[b.length-1]},error:function error(b){console.log('ERROR: '+b.toString()),a=b.toString()}});var b=newTableRow(a.assignee,a.task,a.id);$('#todoTable tbody').append(b),setToDoProgress(a),clearForm('task-form'),hideElement('post-error'),$('#post-error').css('display','none')},error:function error(a,b){console.log(b),console.log('ERROR: '+a.toString())}})}function getToDoList(){$.ajax({type:'GET',url:window.location+Url,success:function success(a){a?($('#todoTable tbody').empty(),$.each(a,function(a,b){var c=newTableRow(b.assignee,b.task,b.id);$('#todoTable tbody').append(c),setToDoProgress(b)})):($('#getResultDiv').html('<strong>Error, no list</strong>'),console.log('Fail: ',a))},error:function error(a){$('#getResultDiv').html('<strong>Error</strong>'),console.log('ERROR: ',a)}})}function changeProgress(a){event.preventDefault();var b=$(this).closest('tr').attr('id'),c=$(this).val(),d=jsonString(b,'s',c,'s');$.ajax({url:window.location+a+b,type:'PUT',dataType:'json',data:d,contentType:'application/json',mimeType:'application/json',success:function success(){},error:function error(a,b){console.log(a),console.log(b)}})}function deleteTask(a){event.preventDefault();var b=$(this).closest('tr').attr('id'),c=$(this).closest('tr');$.ajax({url:window.location+a+b,type:'DELETE',success:function success(){c.fadeOut('slow',function(){c.remove()})},error:function error(a){console.log(a)}})}function clearForm(a){$(':input','#'+a).removeAttr('checked').removeAttr('selected').not(':button, :submit, :reset, :hidden, :radio, :checkbox').val('')}function newTableRow(a,b,c){var d='',e=1;return Object.keys(progressValues).forEach(function(a){d+='<option id=\'option-'+e+'-'+c+'\' value=\''+a+'\'>'+progressValues[a]+'</option>',e++}),'<tr class="to-do-info"  id=\''+c+'\'><td>'+a+'</td><td>'+b+'</td><td><form class=\'progress-form\' id=\'\'><select class=\'select-progress form-control\'>'+d+'</select></form></td><td><button class="btn btn-danger delete-task">Delete task</button></td></tr>'}function jsonString(a,b,c,d){return'{"id" : '+a+',"task" : "'+b+'","progress" : "'+c+'","assignee" :"'+d+'"}'}function hideElement(a){var b=$('#'+a);b.fadeOut('slow',function(){b.css('display','none')})}function setToDoProgress(a){var b=1;Object.keys(progressValues).forEach(function(c){a.progress===progressValues[c]&&$('#option-'+b+'-'+a.id).attr('selected','selected'),b++})}
//# sourceMappingURL=toDoListController-compiled.js.map
