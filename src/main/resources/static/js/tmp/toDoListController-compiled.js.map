{"version":3,"sources":["../toDoListController.js"],"names":["Url","progressValues","$","document","ready","ajax","type","url","window","location","success","result","error","e","console","log","getToDoList","click","addNewToDo","on","keyCode","which","changeProgress","call","deleteTask","taskVal","val","assigneeVal","css","postJson","jsonString","dataType","data","contentType","mimeType","newToDo","async","length","toString","newRow","newTableRow","assignee","task","id","append","setToDoProgress","clearForm","hideElement","empty","each","i","todo","html","event","preventDefault","closest","attr","idVal","putJson","removableTr","fadeOut","remove","formId","removeAttr","not","options","Object","keys","forEach","key","progress","elementId","element"],"mappings":"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","file":"toDoListController-compiled.js","sourcesContent":["'use strict';\r\n\r\nconst Url = \"/list/\";\r\nlet progressValues;\r\n\r\n$(document).ready(function () {\r\n\r\n    $.ajax({\r\n        type: 'GET',\r\n        url: window.location + Url + 'taskProgress',\r\n        success: function (result) {\r\n            if (result) {\r\n                progressValues = result;\r\n            }\r\n            else {\r\n                result = null;\r\n            }\r\n        },\r\n        error: function (e) {\r\n            console.log('ERROR: ', e);\r\n            return null;\r\n        }\r\n    });\r\n\r\n    getToDoList();\r\n\r\n    $('#submit-task').click(addNewToDo());\r\n\r\n    $('#task-form').on('keydown', (function (e) {\r\n        if (e.keyCode == 13 || e.which == 13) {\r\n            addNewToDo();\r\n            return false;\r\n        }\r\n    }));\r\n\r\n    $('#todoTable').on('change', '.select-progress', function () {\r\n        changeProgress.call(this, Url);\r\n    });\r\n\r\n    $('#todoTable').on('click', '.delete-task', function () {\r\n        deleteTask.call(this, Url);\r\n    });\r\n\r\n});\r\n\r\nfunction addNewToDo() {\r\n    // event.preventDefault();\r\n    const taskVal = $('#task').val();\r\n    const assigneeVal = $('#assignee').val();\r\n    if ((assigneeVal == '' || taskVal == '') || (assigneeVal == '' && taskVal == '')) {\r\n        $('#post-error').css('display', 'none');\r\n        return;\r\n    }\r\n    const postJson = jsonString(1, taskVal, 'NOT_STARTED', assigneeVal);\r\n    $.ajax({\r\n        url: window.location + Url,\r\n        type: 'POST',\r\n        dataType: 'json',\r\n        data: postJson,\r\n        contentType: 'application/json',\r\n        mimeType: 'application/json',\r\n        success: function () {\r\n\r\n            let newToDo = null;\r\n            $.ajax({\r\n                type: 'GET',\r\n                url: window.location + Url,\r\n                async: false,\r\n                dataType: 'json',\r\n                success: function (data) {\r\n                    newToDo = data[((data.length) - 1)];\r\n                },\r\n                error: function (e, result) {\r\n                    console.log('ERROR: ' + e.toString());\r\n                    newToDo = e.toString();\r\n                }\r\n            });\r\n            let newRow = newTableRow(newToDo.assignee, newToDo.task, newToDo.id);\r\n            $('#todoTable tbody').append(newRow);\r\n            setToDoProgress(newToDo);\r\n            clearForm('task-form');\r\n            hideElement(\"post-error\");\r\n            /*$('#task-form').children('span').fadeOut('slow', function () {\r\n                $(this).remove();\r\n            });*/\r\n        },\r\n        error: function (e, data) {\r\n            console.log(data);\r\n            console.log('ERROR: ' + e.toString());\r\n        }\r\n    })\r\n}\r\n\r\n\r\nfunction getToDoList() {\r\n    $.ajax({\r\n        type: 'GET',\r\n        url: window.location + Url,\r\n        success: function (result) {\r\n            if (result) {\r\n                $('#todoTable tbody').empty();\r\n                $.each(result, function (i, todo) {\r\n                    let newRow = newTableRow(todo.assignee, todo.task, todo.id);\r\n                    $('#todoTable tbody').append(newRow);\r\n                    setToDoProgress(todo);\r\n                });\r\n            } else {\r\n                $('#getResultDiv').html('<strong>Error, no list</strong>');\r\n                console.log('Fail: ', result);\r\n            }\r\n        },\r\n        error: function (e) {\r\n            $('#getResultDiv').html('<strong>Error</strong>');\r\n            console.log('ERROR: ', e);\r\n        }\r\n    });\r\n}\r\n\r\nfunction changeProgress(Url) {\r\n    event.preventDefault();\r\n    const id = $(this).closest('tr').attr('id');\r\n    const idVal = $(this).val();\r\n    const putJson = jsonString(id, 's', idVal, 's');\r\n    $.ajax({\r\n        url: window.location + Url + id,\r\n        type: 'PUT',\r\n        dataType: 'json',\r\n        data: putJson,\r\n        contentType: 'application/json',\r\n        mimeType: 'application/json',\r\n        success: function (data) {\r\n        },\r\n        error: function (data, e) {\r\n            console.log(data);\r\n            console.log(e);\r\n        }\r\n    })\r\n}\r\n\r\nfunction deleteTask(Url) {\r\n    event.preventDefault();\r\n    const id = $(this).closest('tr').attr('id');\r\n    const removableTr = $(this).closest('tr');\r\n    $.ajax({\r\n        url: window.location + Url + id,\r\n        type: 'DELETE',\r\n        success: function (data) {\r\n            removableTr.fadeOut('slow', function () {\r\n                removableTr.remove();\r\n            });\r\n        },\r\n        error: function (e) {\r\n            console.log(e);\r\n        }\r\n    })\r\n}\r\n\r\nfunction clearForm(formId) {\r\n    $(':input', '#' + formId)\r\n        .removeAttr('checked')\r\n        .removeAttr('selected')\r\n        .not(':button, :submit, :reset, :hidden, :radio, :checkbox')\r\n        .val('');\r\n}\r\n\r\nfunction newTableRow(assignee, task, id) {\r\n\r\n    let options = \"\";\r\n    let i = 1;\r\n    Object.keys(progressValues).forEach(function (key) {\r\n        options += '<option id=\\'option-' + i + '-' + id + '\\' value=\\'' + key + '\\'>' + progressValues[key] + '</option>';\r\n        i++;\r\n    });\r\n\r\n    return '<tr class=\"to-do-info\"  id=\\'' + id + '\\'><td>' + assignee + '</td><td>' + task +\r\n        '</td><td>' +\r\n        '<form class=\\'progress-form\\' id=\\'\\'>' +\r\n        '<select class=\\'select-progress form-control\\'>' +\r\n        options +\r\n        '</select>' +\r\n        '</form>' +\r\n        '</td><td><button class=\"btn btn-danger delete-task\">Delete task</button></td>' +\r\n        '</tr>';\r\n}\r\n\r\nfunction jsonString(id, taskVal, progress, assigneeVal) {\r\n    return '{\\\"id\\\" : ' + id + ',' +\r\n        '\\\"task\\\" : \\\"' + taskVal + '\\\",' +\r\n        '\\\"progress\\\" : \\\"' + progress + '\\\",' +\r\n        '\\\"assignee\\\" :\\\"' + assigneeVal + '\\\"}'\r\n}\r\n\r\nfunction hideElement(elementId) {\r\n    const element = $('#' + elementId);\r\n    element.fadeOut('slow', function () {\r\n        element.css('display', 'none');\r\n    });\r\n}\r\n\r\nfunction setToDoProgress(todo) {\r\n    let i = 1;\r\n    Object.keys(progressValues).forEach(function (key) {\r\n        if (todo.progress === progressValues[key]) {\r\n            $('#option-' + i + '-' + todo.id).attr('selected', 'selected');\r\n        }\r\n        i++;\r\n    });\r\n}\r\n\r\n"]}