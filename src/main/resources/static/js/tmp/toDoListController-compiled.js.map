{"version":3,"sources":["../toDoListController.js"],"names":["progressValues","Url","$","document","ready","ajax","type","url","window","location","success","error","console","log","getToDoList","click","event","preventDefault","addNewToDo","on","keyCode","which","changeProgress","call","deleteTask","val","css","jsonString","dataType","data","contentType","mimeType","async","length","toString","newTableRow","assignee","task","id","append","setToDoProgress","clearForm","hideElement","empty","each","html","closest","attr","fadeOut","remove","removeAttr","not","Object","keys","forEach","progress"],"mappings":"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","file":"toDoListController-compiled.js","sourcesContent":["'use strict';\r\n\r\nconst Url = \"/list/\";\r\nlet progressValues;\r\n\r\n$(document).ready(function () {\r\n\r\n    $.ajax({\r\n        type: 'GET',\r\n        url: window.location + Url + 'taskProgress',\r\n        success: function (result) {\r\n            if (result) {\r\n                progressValues = result;\r\n            }\r\n            else {\r\n                result = null;\r\n            }\r\n        },\r\n        error: function (e) {\r\n            console.log('ERROR: ', e);\r\n            return null;\r\n        }\r\n    });\r\n\r\n    getToDoList();\r\n\r\n    $('#submit-task').click(function() {\r\n        event.preventDefault();\r\n        addNewToDo();\r\n    });\r\n\r\n    $('#task-form').on('keydown', (function (e) {\r\n        if (e.keyCode == 13 || e.which == 13) {\r\n            addNewToDo();\r\n            return false;\r\n        }\r\n    }));\r\n\r\n    $('#todoTable').on('change', '.select-progress', function () {\r\n        changeProgress.call(this, Url);\r\n    });\r\n\r\n    $('#todoTable').on('click', '.delete-task', function () {\r\n        deleteTask.call(this, Url);\r\n    });\r\n\r\n});\r\n\r\nfunction addNewToDo() {\r\n    const taskVal = $('#task').val();\r\n    const assigneeVal = $('#assignee').val();\r\n    if ((assigneeVal == '' || taskVal == '') || (assigneeVal == '' && taskVal == '')) {\r\n        $('#post-error').css('display', 'block');\r\n        return;\r\n    }\r\n    const postJson = jsonString(1, taskVal, 'NOT_STARTED', assigneeVal);\r\n    $.ajax({\r\n        url: window.location + Url,\r\n        type: 'POST',\r\n        dataType: 'json',\r\n        data: postJson,\r\n        contentType: 'application/json',\r\n        mimeType: 'application/json',\r\n        success: function () {\r\n            let newToDo = null;\r\n            $.ajax({\r\n                type: 'GET',\r\n                url: window.location + Url,\r\n                async: false,\r\n                dataType: 'json',\r\n                success: function (data) {\r\n                    newToDo = data[((data.length) - 1)];\r\n                },\r\n                error: function (e, result) {\r\n                    console.log('ERROR: ' + e.toString());\r\n                    newToDo = e.toString();\r\n                }\r\n            });\r\n            let newRow = newTableRow(newToDo.assignee, newToDo.task, newToDo.id);\r\n            $('#todoTable tbody').append(newRow);\r\n            setToDoProgress(newToDo);\r\n            clearForm('task-form');\r\n            hideElement(\"post-error\");\r\n            $('#post-error').css('display', 'none');\r\n            /*$('#task-form').children('span').fadeOut('slow', function () {\r\n                $(this).remove();\r\n            });*/\r\n        },\r\n        error: function (e, data) {\r\n            console.log(data);\r\n            console.log('ERROR: ' + e.toString());\r\n        }\r\n    })\r\n}\r\n\r\n\r\nfunction getToDoList() {\r\n    $.ajax({\r\n        type: 'GET',\r\n        url: window.location + Url,\r\n        success: function (result) {\r\n            if (result) {\r\n                $('#todoTable tbody').empty();\r\n                $.each(result, function (i, todo) {\r\n                    let newRow = newTableRow(todo.assignee, todo.task, todo.id);\r\n                    $('#todoTable tbody').append(newRow);\r\n                    setToDoProgress(todo);\r\n                });\r\n            } else {\r\n                $('#getResultDiv').html('<strong>Error, no list</strong>');\r\n                console.log('Fail: ', result);\r\n            }\r\n        },\r\n        error: function (e) {\r\n            $('#getResultDiv').html('<strong>Error</strong>');\r\n            console.log('ERROR: ', e);\r\n        }\r\n    });\r\n}\r\n\r\nfunction changeProgress(Url) {\r\n    event.preventDefault();\r\n    const id = $(this).closest('tr').attr('id');\r\n    const idVal = $(this).val();\r\n    const putJson = jsonString(id, 's', idVal, 's');\r\n    $.ajax({\r\n        url: window.location + Url + id,\r\n        type: 'PUT',\r\n        dataType: 'json',\r\n        data: putJson,\r\n        contentType: 'application/json',\r\n        mimeType: 'application/json',\r\n        success: function (data) {\r\n        },\r\n        error: function (data, e) {\r\n            console.log(data);\r\n            console.log(e);\r\n        }\r\n    })\r\n}\r\n\r\nfunction deleteTask(Url) {\r\n    event.preventDefault();\r\n    const id = $(this).closest('tr').attr('id');\r\n    const removableTr = $(this).closest('tr');\r\n    $.ajax({\r\n        url: window.location + Url + id,\r\n        type: 'DELETE',\r\n        success: function (data) {\r\n            removableTr.fadeOut('slow', function () {\r\n                removableTr.remove();\r\n            });\r\n        },\r\n        error: function (e) {\r\n            console.log(e);\r\n        }\r\n    })\r\n}\r\n\r\nfunction clearForm(formId) {\r\n    $(':input', '#' + formId)\r\n        .removeAttr('checked')\r\n        .removeAttr('selected')\r\n        .not(':button, :submit, :reset, :hidden, :radio, :checkbox')\r\n        .val('');\r\n}\r\n\r\nfunction newTableRow(assignee, task, id) {\r\n\r\n    let options = \"\";\r\n    let i = 1;\r\n    Object.keys(progressValues).forEach(function (key) {\r\n        options += '<option id=\\'option-' + i + '-' + id + '\\' value=\\'' + key + '\\'>' + progressValues[key] + '</option>';\r\n        i++;\r\n    });\r\n\r\n    return '<tr class=\"to-do-info\"  id=\\'' + id + '\\'><td>' + assignee + '</td><td>' + task +\r\n        '</td><td>' +\r\n        '<form class=\\'progress-form\\' id=\\'\\'>' +\r\n        '<select class=\\'select-progress form-control\\'>' +\r\n        options +\r\n        '</select>' +\r\n        '</form>' +\r\n        '</td><td><button class=\"btn btn-danger delete-task\">Delete task</button></td>' +\r\n        '</tr>';\r\n}\r\n\r\nfunction jsonString(id, taskVal, progress, assigneeVal) {\r\n    return '{\\\"id\\\" : ' + id + ',' +\r\n        '\\\"task\\\" : \\\"' + taskVal + '\\\",' +\r\n        '\\\"progress\\\" : \\\"' + progress + '\\\",' +\r\n        '\\\"assignee\\\" :\\\"' + assigneeVal + '\\\"}'\r\n}\r\n\r\nfunction hideElement(elementId) {\r\n    const element = $('#' + elementId);\r\n    element.fadeOut('slow', function () {\r\n        element.css('display', 'none');\r\n    });\r\n}\r\n\r\nfunction setToDoProgress(todo) {\r\n    let i = 1;\r\n    Object.keys(progressValues).forEach(function (key) {\r\n        if (todo.progress === progressValues[key]) {\r\n            $('#option-' + i + '-' + todo.id).attr('selected', 'selected');\r\n        }\r\n        i++;\r\n    });\r\n}\r\n\r\n"]}